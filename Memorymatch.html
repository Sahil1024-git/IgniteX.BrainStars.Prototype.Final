<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory Matching Game</title>
    <link rel="shortcut icon" type="image/jpg" href="Images/fevicon.PNG"/>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&display=swap" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"> </script>

<style>
/* --- Color Palette from your website --- */
:root {
    --primary-blue: #B22222; /* Crimson/Dark Red */
    --secondary-green: #FFB347; /* Light Orange/Peach */
    --background-light: #FFF5E6; /* Very light creamy background */
    --surface-light: #FFEAD2; /* Light orange surface */
    --text-dark: #6B4E28; /* Dark brown for text contrast */
    --glow-accent: #FFB347; /* Light orange glow accent */
}

/* --- General Body and Font Styles --- */
* {
    font-family: 'Fredoka One', cursive;
    color: var(--text-dark);
}
body {
    margin: 0px;
    background-color: var(--background-light);
    background-image: url('final-back.png');
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
    height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}
html {
    width: 100vw;
    height: 100%;
}

/* --- Header and Info Bar --- */
.header-button {
    transition: all 0.2s ease-in-out;
    background-color: var(--surface-light);
    border: 1px solid rgba(0, 0, 0, 0.05);
    border-radius: 9999px;
    display: flex;
    align-items: center;
    padding: 0.5rem 1rem;
}
.header-button:hover {
    transform: scale(1.1);
    box-shadow: 0 0 15px rgba(255, 255, 255, 0.2);
    background-color: rgba(255, 255, 255, 0.4);
}
.header-button svg, .header-button span {
    color: var(--primary-blue) !important;
}
#title {
    background-color: var(--surface-light);
    border-radius: 10px;
    margin: 8px;
    color: var(--primary-blue);
    height: 56px;
    text-align: center;
    border: 2px dashed var(--primary-blue);
    display: flex;
    justify-content: space-around;
    align-items: center;
    width: 95%;
    max-width: 600px;
    position: relative;
    z-index: 1;
}
#logo {
    font-size: 22px;
    padding-top: 5px;
    display: block;
}
#time, #moves {
    font-size: 1rem;
    color: var(--text-dark);
    margin: 0;
}

/* --- Game Board and Cards --- */
table {
    margin-top: 1rem;
}
td {
    height: 80px;
    width: 80px;
    padding: 5px;
    background-color: transparent;
}
td, .inner, .front, .back {
    border-radius: 1rem;
}
.inner {
    position: relative;
    width: 100%;
    height: 100%;
    text-align: center;
    transition: transform 0.8s;
    transform-style: preserve-3d;
    transform: rotateY(0deg);
}
.front, .back {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
}
.front {
    background-color: var(--surface-light);
    border: 2px dashed var(--primary-blue);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
}
.front:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
}
.back {
    background-color: var(--glow-accent);
    border: 2px solid var(--primary-blue);
    box-shadow: 0 0 15px var(--glow-accent);
    transform: rotateY(180deg);
}
p {
    font-size: 40px;
    margin: 0;
    color: var(--primary-blue);
}
/* --- Overlay and Button Styles --- */
#ol {
    position: fixed;
    top: 0;
    left: 0;
    height: 100vh;
    width: 100vw;
    background-color: rgba(0,0,0,0.4);
    backdrop-filter: blur(8px);
    z-index: 2;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    text-align: center;
}
#inst {
    width: 85vw;
    max-width: 500px;
    background-color: var(--surface-light);
    border: 2px dashed var(--primary-blue);
    border-radius: 1rem;
    padding: 20px;
    color: var(--text-dark);
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
}
#inst h3, #inst p {
    color: var(--primary-blue);
}
#inst li {
    text-align: left;
    color: var(--text-dark);
    margin-bottom: 5px;
    font-size: 1rem;
}
button {
    background-color: var(--surface-light);
    color: var(--primary-blue);
    margin: 15px; /* Changed from 8px to 12px to increase space */
    border: 1px solid rgba(0, 0, 0, 0.05);
    border-radius: 9999px;
    font-size: 18px;
    padding: 10px 20px;
    transition: all 0.2s ease-in-out;
}
button:hover {
    transform: scale(1.1);
    box-shadow: 0 0 15px rgba(255, 255, 255, 0.2);
    background-color: rgba(255, 255, 255, 0.4);
}
button:hover, button:active {
    outline:0;
}
</style>
</head>
<body>
    <div id="ol"></div>
    <div id="title">
        <span id="moves" class="header-button">Moves: 0</span>
        <span id="logo">MEMORY MATCHING GAME</span>
        <span id="time" class="header-button">Time: 00:00</span>
    </div>
    <center>
        <table cellspacing="15"></table>
    </center>
    
<script>
    var em = ["üíê","üåπ","üåª","üèµÔ∏è","üå∫","üå¥","üåà","üçì","üçí","üçé","üçâ","üçä","ü•≠","üçç","üçã","üçè","üçê","ü•ù","üçá","ü••","üçÖ","üå∂Ô∏è","üçÑ","üßÖ","ü•¶","ü•ë","üçî","üçï","üßÅ","üéÇ","üç¨","üç©","üç´","üéà"];
    //Shuffling above array
    var tmp, c, p = em.length;
    if(p) while(--p) {
        c = Math.floor(Math.random() * (p + 1));
        tmp = em[c];
        em[c] = em[p];
        em[p] = tmp;
    }

    //Variables
    var pre="", pID, ppID=0, turn=0, t="transform", flip="rotateY(180deg)", flipBack="rotateY(0deg)", time, mode;

    //Resizing Screen
    window.onresize = init;
    function init() {
        W = innerWidth;
        H = innerHeight;
        $('body').height(H+"px");
        $('#ol').height(H+"px");
    }

    //Showing instructions
    window.onload = function() {
        $("#ol").html(`<div id="inst"><h3>Welcome!</h3><h4>Instructions for the game:</h4><br/><li>Match pairs of identical emojis by flipping the cards.</li><li>Click on a card to flip it over.</li><li>If two cards you flip are not a match, they will flip back.</li><p style="font-size:18px;">Click a mode below to start!</p><div class="flex flex-wrap justify-center mt-4"><button onclick="start(3, 4)">3 x 4</button> <button onclick="start(4, 4)">4 x 4</button><button onclick="start(4, 5)">4 x 5</button><button onclick="start(5, 6)">5 x 6</button><button onclick="start(6, 6)">6 x 6</button></div></div>`);
    }

    //Starting the game
    function start(r,l) {
        //Timer and moves
        min=0, sec=0, moves=0;
        $("#time").html("Time: 00:00");
        $("#moves").html("Moves: 0");
        time = setInterval(function() {
            sec++;
            if(sec==60) {
                min++; sec=0;
            }
            let minStr = min < 10 ? "0" + min : min;
            let secStr = sec < 10 ? "0" + sec : sec;
            $("#time").html(`Time: ${minStr}:${secStr}`);
        }, 1000);
        rem=r*l/2, noItems=rem;
        mode = r+"x"+l;
        //Generating item array and shuffling it
        var items = [];
        for (var i=0;i<noItems;i++)
            items.push(em[i]);
        for (var i=0;i<noItems;i++)
            items.push(em[i]);
        var tmp, c, p = items.length;
        if(p) while(--p) {
            c = Math.floor(Math.random() * (p + 1));
            tmp = items[c];
            items[c] = items[p];
            items[p] = tmp;
        }
        
        //Creating table
        $("table").html("");
        var n=1;
        for (var i = 1;i<=r;i++) {
            $("table").append("<tr>");
            for (var j = 1;j<=l;j++) {
                $("table").append(`<td id='${n}' onclick="change(${n})"><div class='inner'><div class='front'></div><div class='back'><p>${items[n-1]}</p></div></div></td>`);
                n++;
            }
            $("table").append("</tr>");
        }
        
        //Hiding instructions screen
        $("#ol").fadeOut(500);
    }

    //Function for flipping blocks
    function change(x) {
        //Variables
        let i = "#"+x+" .inner";
        let f = "#"+x+" .inner .front";
        let b = "#"+x+" .inner .back";
        
        //Dont flip for these conditions
        if (turn==2 || $(i).attr("flip")=="block" || ppID==x) {}
        
        //Flip
        else {
            $(i).css(t, flip);
            if (turn==1) {
                //This value will prevent spam clicking
                turn=2;
                
                //If both flipped blocks are not same
                if (pre!=$(b).text()) {
                    setTimeout(function() {
                        $(pID).css(t, flipBack);
                        $(i).css(t, flipBack);
                        ppID=0;
                    },1000);
                }
                
                //If blocks flipped are same
                else {
                    rem--;
                    $(i).attr("flip", "block");
                    $(pID).attr("flip", "block");
                }
                
                setTimeout(function() {
                    turn=0;
                    //Increase moves
                    moves++;
                    $("#moves").html("Moves: "+moves);
                },1150);
                
            }
            else {
                pre = $(b).text();
                ppID = x;
                pID = "#"+x+" .inner";
                turn=1;
            }
            
            //If all pairs are matched
            if (rem==0) {
                clearInterval(time);
                if (min==0) {
                    time = `${sec} seconds`;
                }
                else {
                    time = `${min} minute(s) and ${sec} second(s)`;
                }
                setTimeout(function() {
                    $("#ol").html(`<div id="inst"><h2>Congrats!</h2><p style="font-size:23px;padding:10px;">You completed the ${mode} mode in ${moves} moves. It took you ${time}.</p><p style="font-size:18px">Play Again?</p><div class="flex flex-wrap justify-center mt-4"><button onclick="start(3, 4)">3 x 4</button> <button onclick="start(4, 4)">4 x 4</button><button onclick="start(4, 5)">4 x 5</button><button onclick="start(5, 6)">5 x 6</button><button onclick="start(6, 6)">6 x 6</button></div></div>`);
                    $("#ol").fadeIn(750);
                }, 1500);
            }
        }
    }
</script>
</body>

</html>